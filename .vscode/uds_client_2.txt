from udsoncan.services import SecurityAccess

try:
    level = 0x11
    seed_response = client.security_access.request_seed(level)
    if seed_response.positive:
        seed = seed_response.service_data.seed
        logging.info(f"Seed: {seed.hex()}")

        # Calculate key here (example placeholder)
        key = b'\x12\x34\x56\x78'  # Replace with DLL or algorithm-generated key

        key_response = client.security_access.send_key(level, key)
        if key_response.positive:
            logging.info("Key accepted, security access granted")
        else:
            logging.warning("Key rejected")
    else:
        logging.warning("Seed request failed")
except Exception as e:
    logging.error(f"Security Access failed: {e}")
